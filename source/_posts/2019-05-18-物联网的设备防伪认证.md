---
title: 物联网的设备防伪认证
date: 2019-05-18 15:44:17
categories: 
- 万物互联
layout: post
published: true
---

# 什么是防伪认证

&emsp;&emsp;毫无疑问，是为了校验物联网产品的合法性，只有通过了合法性认证的物联网产品才能和物联网云建立连接。   

# 为什么需要防伪认证

&emsp;&emsp;物联网安全是物联网的重中之重，必须得到重视，而防伪认证时物联网安全的**第一道门槛**。  

# 防伪模式有哪些

1. **密钥认证模式**
2. **签名认证模式**

<!-- more -->

# 如何实现防伪认证

## 密钥认证模式

### 说明

&emsp;&emsp;物联网平台给每一个设备或者每一型号设备分配固定的**产品ID**和**产品密钥**，将SN码，MAC地址，产品ID和产品密钥四个参数写入flash，当设备注册时，携带以上四个参数请求物联网云，物联网云认证数据正确性之后，再响应`auth_token`和分配连接地址，每一次数据上传都需要携带`auth_token`。  

### 流程图

![物联网设备密钥防伪认证](http://assets.processon.com/chart_image/5cdfbd4ee4b00446dc694dac.png "物联网设备密钥防伪认证")

## 签名认证模式

### 说明

&emsp;&emsp;物联网平台给每一个设备的SN码和MAC地址进行私钥签名（如**ECDSA_sign**），将SN码，MAC地址和签名三个参数写入`flash`，当设备注册时，携带以上三个参数请求物联网云，然后物联网云进行公钥校验（如**ECDSA_verify**），再响应`auth_token`和分配连接地址，每一次数据上传都需要携带`auth_token`。  

### 流程图

![物联网设备签名防伪认证](http://assets.processon.com/chart_image/5cde7588e4b006c6eaa177c5.png "物联网设备签名防伪认证")

## 两种模式比较

| 模式         | 性能 | 安全 | 备注                                                         |
| ------------ | ---- | ---- | ------------------------------------------------------------ |
| 密钥认证模式 | 低   | 中   | 1. 需要查询数据或者缓存，增加服务端负载； 2. 需要提前将数据产生并持久化，要防止出现重复数据，生产烧写flash时进行下发数据； |
| 签名认证模式 | 高   | 高   | 1. 要求硬件高性能的加密方式保存签名；2. 动态数字签名消耗的性能也不低，固定签名的数据需要持久化，也需要生产烧写flash时进行下发数据； |



# 参考文献

[智能硬件设备防伪设计](https://www.cnblogs.com/fishou/p/4175509.html)  
[阿里云文档](https://help.aliyun.com/document_detail/42649.html?spm=a2c4g.11186623.6.641.5b495483ULe3ox)    
[京东小京鱼文档](https://smartdev.jd.com/docCenterDoc/view/2/102/134000001/134000001#topMaoDot)  